{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/track.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","searchForm","document","btnSubmit","btnReset","searchString","tabelBody","querySelector","compositionsArray","isLoadData","tabelBodyHeight","clientHeight","this","windowHeight","window","outerHeight","addEventListener","update","getParams","title","length","tags","map","tagVal","join","sortBy","sortType","page","maxPage","generateTable","data","replace","rows","DocumentFragment","forEach","composition","lastPlayed","composer","tagsHtml","row","createElement","classList","add","innerHTML","composerName","appendChild","offsetTop","getCompositions","param","url","getTitle","getTags","getSort","getPage","requestData","then","result","json","response","console","log","status","meta","current_page","last_page","errors","error","message","show","event","preventDefault","remove","tagsBtn","$allTags","blur","modalTags","modal","outerHTML","tagsForm","querySelectorAll","tagsArray","Array","from","tag","hide","sortByBtns","btn","dataset","sortTypeDefault","sortTypeBtns","newType","box","lastKnownScrollPosition","ticking","tabelCoor","getBoundingClientRect","top","pageYOffset","left","pageXOffset","scrollY","requestAnimationFrame","scrollPos","endPoint","nextPage"],"mappings":"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","file":"/js/track.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\n\n// DEFINE VARIABLES\nconst {searchForm} = document,\n    {btnSubmit, btnReset, searchString} = searchForm,\n    tabelBody = document.querySelector(\".table-body\");\nlet compositionsArray = {},\n    isLoadData = false;\nconst tabelBodyHeight = {\n    \"get\": tabelBody.clientHeight,\n    \"update\": function update () {\n\n        this.get = tabelBody.clientHeight;\n\n    }\n};\nlet windowHeight = window.outerHeight;\n\nwindow.addEventListener(\"load\", () => {\n\n    tabelBodyHeight.update();\n\n});\nwindow.addEventListener(\"resize\", () => {\n\n    windowHeight = window.outerHeight;\n    tabelBodyHeight.update();\n\n});\n\n// DEFINE OBJECT TO GET PARAMETRS FOR SEARCH/SORT\nconst getParams = {\n    \"title\": \"\",\n    \"getTitle\": function getTitle () {\n\n        return this.title.length ? `&title=${this.title}` : \"\";\n\n    },\n    \"tags\": [],\n    \"getTags\": function getTags () {\n\n        if (!this.tags.length) {\n\n            return \"\"; \n\n        }\n\n        const arr = this.tags.map((tagVal) => `&tags[]=${tagVal}`);\n\n        return arr.join(\"\");\n    \n    },\n    \"sortBy\": \"\",\n    \"sortType\": \"\",\n    \"getSort\": function getSort () {\n\n        if (this.sortBy === \"\" || this.sortType === \"\") {\n\n            return \"\"; \n\n        }\n\n        return `&sortBy=${this.sortBy}&sortType=${this.sortType}`;\n\n    },\n    \"page\": 1,\n    \"maxPage\": 2,\n    \"nextPage\": function nextPage () {\n\n        this.page =  this.page < this.maxPage ? this.page + 1 : this.maxPage;\n\n    },\n    \"getPage\": function getPage () {\n\n        return `&page=${this.page}`;\n\n    }\n};\n\n// FUNCTION FOR RENDER TABLE ROW\nconst generateTable = (data, replace) => {\n\n    const rows = new DocumentFragment();\n\n    data.forEach((composition) => {\n\n        const {title = \"\", tags = [], lastPlayed = \"\", composer = {}} = composition;\n        let tagsHtml = \"<ul class='tags-list'>\",\n            i = 0;\n        const {length} = tags;\n\n        for (i; i < length; i++) {\n\n            tagsHtml += `<li class=\"tags-list_item\">${tags[i].title}</li>`;\n\n        }\n        tagsHtml += \"</ul>\";\n        const row = document.createElement(\"div\");\n\n        row.classList.add(\"table-row\");\n        row.innerHTML = `<div class=\"table-row_cell table-row_cell-title\">\n                        <div class=\"author\">${composer.composerName}</div>\n                        ${title}\n                    </div>\n                    <div class=\"table-row_cell table-row_cell-tags\">\n                            ${tagsHtml}\n                    </div>\n                    <div class=\"table-row_cell table-row_cell-date\">${lastPlayed}</div>`;\n        rows.appendChild(row);\n\n    });\n\n    if (replace) {\n\n        tabelBody.innerHTML = \"\";\n\n    }\n    tabelBody.appendChild(rows);\n// eslint-disable-next-line no-unused-expressions\n    tabelBody.offsetTop;\n    tabelBodyHeight.update();\n\n};\n\n// MAIN FUNCTION TO GET COMPOSITIONS\nconst getCompositions = (param = {}) => {\n\n    param.replace = typeof param.replace === \"undefined\" ? true : param.replace;\n    const url = `/async/tracks?${getParams.getTitle()}${getParams.getTags()}${getParams.getSort()}${getParams.getPage()}`;\n\n    isLoadData = true;\n    requestData(url).\n    then(\n        (result) => {\n\n            const json = result.response;\n\n            // eslint-disable-next-line no-console\n            console.log(json);\n\n            if (json.status === \"success\") {\n\n                if (!json.data.length) {\n\n                    const row = \"<div class='table-row table-row_error'>Таких произведений не найдено</div>\";\n\n                    tabelBody.innerHTML = row;\n\n                    return;\n\n                }\n\n                compositionsArray = json.data;\n                generateTable(compositionsArray, param.replace);\n                getParams.page = json.meta.current_page;\n                getParams.maxPage = json.meta.last_page;\n                isLoadData = false;\n\n            } else {\n\n                // eslint-disable-next-line guard-for-in\n                for (const key in json.errors) {\n\n                    const error = json.errors[key];\n                    const {length} = error;\n                    let i = 0;\n\n                    for (i; i < length; i++) {\n\n                        const mess = message({\n\n                            \"text\": error[i]\n\n                        });\n\n                        mess.show();\n\n                    }\n\n                }\n\n                isLoadData = false;\n\n            }\n\n        },\n        (error) => {\n\n            // eslint-disable-next-line no-console\n            console.log(`Rejected: ${error}`);\n\n        }\n    );\n\n};\n\nsearchForm.addEventListener(\"submit\", (event) => {\n\n    event.preventDefault();\n\n    getParams.title = searchString.value;\n    getParams.page = 1;\n\n    getCompositions();\n\n    if (searchString !== \"\") {\n\n        btnReset.classList.add(\"show\");\n        btnSubmit.classList.add(\"hide\");\n\n    }\n\n});\nsearchString.addEventListener(\"input\", () => {\n\n    btnSubmit.classList.remove(\"hide\");\n\n});\n\nbtnReset.addEventListener(\"click\", () => {\n\n    getParams.title = \"\";\n    getParams.tags = [];\n    getParams.sortBy = \"\";\n\n    getCompositions();\n\n    btnReset.classList.remove(\"show\");\n    btnSubmit.classList.remove(\"hide\");\n\n});\n\nconst tagsBtn = searchForm.querySelector(\".tag-btn\"),\n    $allTags = document.querySelector(\".all-tags .tags-list\");\n\ntagsBtn.addEventListener(\"focus\", () => {\n\n    tagsBtn.blur();\n\n});\n\nconst modalTags = modal({\n    \"title\": \"Поиск по тегам\",\n    \"content\": `<form name=\"tagsForm\">${$allTags.outerHTML}\n<div class=\"btns text-center\">\n<button type=\"submit\" name=\"btnSubmit\">Поиск</button>\n<button type=\"reset\" name=\"btnReset\" class=\"disagree\">Сбросить</button>\n</div></form>\n`,\n    \"class\": \"tags-popup\",\n    \"onBuild\": (modal) => {\n\n        const {tagsForm} = document;\n\n        tagsForm.addEventListener(\"submit\", (event) => {\n        \n            event.preventDefault();\n\n            const tags = tagsForm.querySelectorAll(\"input[type=checkbox]:checked\");\n            let tagsArray = Array.from(tags);\n        \n            tagsArray = tagsArray.map((tag) => tag.value);\n            getParams.tags = tagsArray;\n            getParams.page = 1;\n\n            getCompositions();\n\n            modal.hide();\n\n\n        });\n\n\n    }\n});\n\ntagsBtn.addEventListener(\"click\", (event) => {\n\n    event.preventDefault();\n    modalTags.show();\n\n});\n\nconst sortByBtns = document.querySelectorAll(\".sortBy\");\n\nfor (let i = 0, {length} = sortByBtns; i < length; i++) {\n\n    const btn = sortByBtns[i];\n\n    btn.addEventListener(\"click\", () => {\n\n        btn.dataset.sortType = \"\";\n\n        getParams.sortBy =  btn.dataset.sortBy;\n        getParams.sortType =  btn.dataset.sortTypeDefault;\n\n        getCompositions();\n\n    });\n\n}\n\nconst sortTypeBtns = document.querySelectorAll(\".sortType\");\n\nfor (let i = 0, {length} = sortTypeBtns; i < length; i++) {\n\n    const btn = sortTypeBtns[i];\n\n// eslint-disable-next-line no-loop-func\n    btn.addEventListener(\"click\", () => {\n\n        const sortBy = document.querySelector(btn.dataset.for);\n\n        if (!sortBy) {\n\n            const error = message({\n\n                \"text\": \"data-for не верный, попросите Лешу глянуть файл track.js в районе 262 строчки\"\n\n            });\n        \n            error.show();\n\n            return;\n\n        }\n        const prevType = sortBy.dataset.sortType ? sortBy.dataset.sortType : sortBy.dataset.sortTypeDefault;\n        const newType = prevType === \"desc\" ? \"asc\" : \"desc\";\n\n        sortBy.dataset.sortType = newType;\n        getParams.sortBy =  sortBy.dataset.sortBy;\n        getParams.sortType = newType;\n\n        getCompositions();\n\n    });\n\n}\n\nconst paginate = () => {\n\n    let lastKnownScrollPosition = 0;\n    let ticking = false;\n    const whenLoad = 0.6;\n    const getCoords = (elem) => {\n\n        const box = elem.getBoundingClientRect();\n  \n        return {\n            \"top\": box.top + pageYOffset,\n            \"left\": box.left + pageXOffset\n        };\n  \n    };\n    const tabelCoor = getCoords(tabelBody);\n\n    const doSomething = (scrollPos) => {\n\n        const endPoint = tabelCoor.top + tabelBodyHeight.get;\n        const currentEndPoint = scrollPos + windowHeight;\n        const makeLoad = currentEndPoint >= endPoint * whenLoad;\n\n    // eslint-disable-next-line no-console\n    // console.log(currentEndPoint, endPoint * whenLoad);\n\n        if (makeLoad && !isLoadData && getParams.page < getParams.maxPage) {\n\n            getParams.nextPage();\n            getCompositions({\n                \"replace\": false\n            });\n\n        }\n\n    };\n\n    window.addEventListener(\"scroll\", () => {\n\n        lastKnownScrollPosition = window.scrollY;\n\n        if (!ticking) {\n        \n            window.requestAnimationFrame(() => {\n\n                doSomething(lastKnownScrollPosition);\n                ticking = false;\n\n            });\n\n            ticking = true;\n\n        }\n\n    });\n\n};\n\npaginate();\n"],"sourceRoot":""}